<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<div id="wrapper">
  <navigation [loginInfo]="loginInfo" *ngIf="loginInfo"></navigation>

  <div id="page-wrapper" class="gray-bg">

    <topnavbar></topnavbar>
    
    <div class="container">
      <div class="table-wrapper" style="height: 600px;width: 90%;
      overflow-y: scroll;">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-8">
              <h2>MIS <b>Report</b></h2> <a style="float: inherit; margin-top: 2%;" type="button"
                href="./assets/misReport.xlsx" class="btn btn-info add-new {{buttonDisabled}}"><i class="fa fa-plus"></i>
                Export</a>

            </div>
          </div>
          <div class="row" style="margin-top: 2%;">
            <div class="col-sm-1">
              From
            </div>
            <div class="col-sm-5">
              <angular2-date-picker [(ngModel)]="datefrom" (onDateSelect)="fromDateSelect($event)"
                [settings]="settings"></angular2-date-picker>
            </div>
            <div class="col-sm-1">
              To
            </div>
            <div class="col-sm-5">
              <angular2-date-picker [(ngModel)]="dateto" (onDateSelect)="toDateSelect($event)" [settings]="settings">
              </angular2-date-picker>

            </div>
            <div class="row" style="margin-top: 8%;">
              <div class="col-sm-1">Select Campaing</div>
              <!-- <div style="z-index: 10;">
                <img alt="image" class="img-custom" height="60" src="./assets/img/loader.gif" style="position: absolute;
                z-index: 10;
                width: 20%;
                height: 20%;
                left: 35%;" />
              </div> -->

              <div class="col-sm-4">
                <angular4-multiselect [data]="dropdownList" [(ngModel)]="selectedItems" [settings]="dropdownSettings"
                  (onSelect)="onItemSelect($event)" (onDeSelect)="OnItemDeSelect($event)"
                  (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeSelectAll($event)"></angular4-multiselect>
              </div>
              <div class="col-sm-4">
                  <angular4-multiselect [data]="dropdownUserList" [(ngModel)]="selectedUserItems" [settings]="dropdownUserSettings"></angular4-multiselect>
                </div>
              <div class="col-sm-3">
                  <button class="btn btn-info add-new" (click)="fetchReportData(1000,1000)">Submit</button>
                </div>
            </div>
            
            
          </div>
        </div>
        <div *ngIf="loading" class="loader"></div>
        <div *ngIf="!this.datapresent">Please select date and campaing</div>
       

        <table *ngIf="this.datapresent" class="table table-bordered " style="width: 1900px;">
          <thead>
            <tr>
              <td *ngFor="let header of headers;" scope="col">{{header.value}}<i (click)="removeColumn(header.key)"
                  class="material-icons close">&#xe5cd;</i></td>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of reportData; let i = index;">

              <td scope="row">{{i+1}}</td>
              <td *ngIf="data.lead_id!=undefined">{{data.lead_id}}</td>
              <td *ngIf="data.list_id!=undefined">{{data.list_id}}</td>
              <td *ngIf="data.campaign_id!=undefined">{{data.campaign_id}}</td>
              <td *ngIf="data.call_date!=undefined">{{data.call_date}}</td>
              <td *ngIf="data.length_in_sec!=undefined">{{data.length_in_sec}}</td>
              <td *ngIf="data.status!=undefined">{{data.status}}</td>
              <td *ngIf="data.phone_code!=undefined">{{data.phone_code}}</td>
              <td *ngIf="data.phone_number!=undefined">{{data.phone_number}}</td>
              <td *ngIf="data.user!=undefined">{{data.user}}</td>
              <td *ngIf="data.comments!=undefined">{{data.comments}}</td>
              <td *ngIf="data.processed!=undefined">{{data.processed}}</td>
              <td *ngIf="data.term_reason!=undefined">{{data.term_reason}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="footer">
      <div>
        <strong>Copyright</strong> vici dial &copy; 2019
      </div>
    </div>
  </div>
</div>
